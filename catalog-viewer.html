<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Neetrino Platform - –ö–∞—Ç–∞–ª–æ–≥ –¥–µ–º–æ</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0;
            padding: 20px;
            background: #f5f5f5;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        .header {
            background: white;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }
        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            text-align: center;
        }
        .stat-number {
            font-size: 2em;
            font-weight: bold;
            color: #2563eb;
        }
        .filters {
            background: white;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .filter-group {
            display: flex;
            gap: 15px;
            align-items: center;
            flex-wrap: wrap;
        }
        .filter-group input, .filter-group select {
            padding: 8px 12px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 14px;
        }
        .demo-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
        }
        .demo-card {
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            transition: transform 0.2s;
        }
        .demo-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.15);
        }
        .demo-image {
            width: 100%;
            height: 200px;
            object-fit: cover;
        }
        .demo-content {
            padding: 15px;
        }
        .demo-title {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 8px;
            color: #1f2937;
        }
        .demo-category {
            color: #6b7280;
            font-size: 14px;
            margin-bottom: 8px;
        }
        .demo-url {
            color: #2563eb;
            text-decoration: none;
            font-size: 14px;
        }
        .demo-url:hover {
            text-decoration: underline;
        }
        .pagination {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 20px;
        }
        .pagination button {
            padding: 8px 12px;
            border: 1px solid #ddd;
            background: white;
            border-radius: 4px;
            cursor: pointer;
        }
        .pagination button:hover {
            background: #f5f5f5;
        }
        .pagination button.active {
            background: #2563eb;
            color: white;
            border-color: #2563eb;
        }
        .loading {
            text-align: center;
            padding: 40px;
            color: #6b7280;
        }
        .error {
            text-align: center;
            padding: 40px;
            color: #dc2626;
            background: #fef2f2;
            border-radius: 8px;
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üöÄ Neetrino Platform - –ö–∞—Ç–∞–ª–æ–≥ –¥–µ–º–æ</h1>
            <p>–ü—Ä–æ—Å–º–æ—Ç—Ä –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤ –∏–∑ CSV —Ñ–∞–π–ª–∞</p>
        </div>
        
        <div class="stats" id="stats">
            <div class="loading">–ó–∞–≥—Ä—É–∑–∫–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏...</div>
        </div>
        
        <div class="filters">
            <div class="filter-group">
                <input type="text" id="search" placeholder="–ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é..." />
                <select id="category">
                    <option value="">–í—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏</option>
                </select>
                <button onclick="loadDemos()">–ü–æ–∏—Å–∫</button>
            </div>
        </div>
        
        <div id="demos" class="loading">
            –ó–∞–≥—Ä—É–∑–∫–∞ –¥–µ–º–æ...
        </div>
        
        <div class="pagination" id="pagination"></div>
    </div>

    <script>
        let demos = [];
        let currentPage = 1;
        let currentCategory = '';
        let currentSearch = '';

        // –ó–∞–≥—Ä—É–∂–∞–µ–º –¥–µ–º–æ –∏–∑ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Ñ–∞–π–ª–∞
        async function loadDemosFromFile() {
            try {
                const response = await fetch('./data/demos.json');
                if (!response.ok) {
                    throw new Error('–§–∞–π–ª —Å –¥–µ–º–æ –Ω–µ –Ω–∞–π–¥–µ–Ω');
                }
                demos = await response.json();
                console.log(`üìö –ó–∞–≥—Ä—É–∂–µ–Ω–æ ${demos.length} –¥–µ–º–æ –∏–∑ —Ñ–∞–π–ª–∞`);
                loadStats();
                loadCategories();
                loadDemos();
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–µ–º–æ:', error);
                document.getElementById('demos').innerHTML = `
                    <div class="error">
                        <h3>–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–µ–º–æ</h3>
                        <p>–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–∞–π–ª —Å –¥–µ–º–æ. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ñ–∞–π–ª data/demos.json —Å—É—â–µ—Å—Ç–≤—É–µ—Ç.</p>
                        <p>–û—à–∏–±–∫–∞: ${error.message}</p>
                    </div>
                `;
            }
        }

        function loadStats() {
            const categories = [...new Set(demos.map(demo => demo.category))];
            const activeDemos = demos.filter(demo => demo.status === 'active');
            const vendors = [...new Set(demos.map(demo => demo.vendorId))];
            
            document.getElementById('stats').innerHTML = `
                <div class="stat-card">
                    <div class="stat-number">${demos.length.toLocaleString()}</div>
                    <div>–í—Å–µ–≥–æ –¥–µ–º–æ</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">${categories.length}</div>
                    <div>–ö–∞—Ç–µ–≥–æ—Ä–∏–π</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">${activeDemos.length.toLocaleString()}</div>
                    <div>–ê–∫—Ç–∏–≤–Ω—ã—Ö</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">${vendors.length}</div>
                    <div>–í–µ–Ω–¥–æ—Ä–æ–≤</div>
                </div>
            `;
        }

        function loadCategories() {
            const categories = [...new Set(demos.map(demo => demo.category))].sort();
            
            const select = document.getElementById('category');
            select.innerHTML = '<option value="">–í—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏</option>';
            categories.forEach(category => {
                const option = document.createElement('option');
                option.value = category;
                option.textContent = category;
                select.appendChild(option);
            });
        }

        function loadDemos() {
            currentSearch = document.getElementById('search').value;
            currentCategory = document.getElementById('category').value;
            currentPage = 1;
            
            let filteredDemos = demos;
            
            // –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
            if (currentCategory) {
                filteredDemos = filteredDemos.filter(demo => 
                    demo.category.toLowerCase().includes(currentCategory.toLowerCase())
                );
            }
            
            // –ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é
            if (currentSearch) {
                filteredDemos = filteredDemos.filter(demo => 
                    demo.title.toLowerCase().includes(currentSearch.toLowerCase())
                );
            }
            
            // –ü–∞–≥–∏–Ω–∞—Ü–∏—è
            const limit = 20;
            const startIndex = (currentPage - 1) * limit;
            const endIndex = startIndex + limit;
            const paginatedDemos = filteredDemos.slice(startIndex, endIndex);
            
            displayDemos(paginatedDemos);
            displayPagination(currentPage, Math.ceil(filteredDemos.length / limit));
        }

        function displayDemos(demosToShow) {
            if (demosToShow.length === 0) {
                document.getElementById('demos').innerHTML = '<div class="loading">–î–µ–º–æ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</div>';
                return;
            }
            
            const demosHtml = demosToShow.map(demo => `
                <div class="demo-card">
                    <img src="${demo.imageUrl || 'https://via.placeholder.com/300x200?text=No+Image'}" 
                         alt="${demo.title}" class="demo-image" 
                         onerror="this.src='https://via.placeholder.com/300x200?text=No+Image'">
                    <div class="demo-content">
                        <div class="demo-title">${demo.title}</div>
                        <div class="demo-category">${demo.category}${demo.subcategory ? ' > ' + demo.subcategory : ''}</div>
                        <a href="${demo.url}" target="_blank" class="demo-url">–û—Ç–∫—Ä—ã—Ç—å –¥–µ–º–æ ‚Üí</a>
                    </div>
                </div>
            `).join('');
            
            document.getElementById('demos').innerHTML = `<div class="demo-grid">${demosHtml}</div>`;
        }

        function displayPagination(page, totalPages) {
            if (totalPages <= 1) {
                document.getElementById('pagination').innerHTML = '';
                return;
            }
            
            let paginationHtml = '';
            
            // –ü—Ä–µ–¥—ã–¥—É—â–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
            if (page > 1) {
                paginationHtml += `<button onclick="changePage(${page - 1})">‚Üê</button>`;
            }
            
            // –ù–æ–º–µ—Ä–∞ —Å—Ç—Ä–∞–Ω–∏—Ü
            for (let i = Math.max(1, page - 2); i <= Math.min(totalPages, page + 2); i++) {
                paginationHtml += `<button class="${i === page ? 'active' : ''}" onclick="changePage(${i})">${i}</button>`;
            }
            
            // –°–ª–µ–¥—É—é—â–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
            if (page < totalPages) {
                paginationHtml += `<button onclick="changePage(${page + 1})">‚Üí</button>`;
            }
            
            document.getElementById('pagination').innerHTML = paginationHtml;
        }

        function changePage(page) {
            currentPage = page;
            loadDemos();
        }

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π
        document.getElementById('search').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                loadDemos();
            }
        });

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        loadDemosFromFile();
    </script>
</body>
</html>
